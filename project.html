<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Details - Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Additional styles for project detail page */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--pure-black);
            border: 1px solid var(--cathode-cyan);
            border-radius: 8px;
            padding: 12px 20px;
            color: var(--cathode-cyan);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            filter: var(--glow-cyan);
        }
        
        .back-button:hover {
            background: rgba(77, 217, 217, 0.1);
            transform: translateX(-5px);
        }
        
        .project-detail-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }
        
        .project-hero {
            background: var(--pure-black);
            border-radius: 8px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow:
                inset 0 2px 8px var(--near-black),
                0 4px 16px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--steel-gray);
            position: relative;
            overflow: hidden;
        }
        
        .project-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--light-gray) 20%,
                var(--cathode-cyan) 50%,
                var(--phosphor-green) 80%,
                transparent 100%);
            filter: var(--glow-gray);
        }
        
        .project-title-main {
            font-family: var(--font-mono);
            font-size: 3rem;
            color: var(--light-gray);
            filter: var(--glow-gray);
            margin-bottom: 10px;
            text-align: center;
        }
        
        .project-subtitle {
            font-family: var(--font-mono);
            font-size: 1.2rem;
            color: var(--cathode-cyan);
            filter: var(--glow-cyan);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .project-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .meta-item {
            background: var(--near-black);
            border: 1px solid var(--iron-gray);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .meta-label {
            font-family: var(--font-mono);
            color: var(--terminal-green);
            filter: var(--glow-terminal);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .meta-value {
            color: var(--medium-gray-text);
            font-family: var(--font-mono);
        }
        
        .project-content {
            display: grid;
            gap: 30px;
        }
        
        .content-section-detail {
            background: var(--pure-black);
            border-radius: 8px;
            padding: 30px;
            box-shadow:
                inset 0 2px 8px var(--near-black),
                0 4px 16px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--steel-gray);
        }
        
        .section-title-detail {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            color: var(--light-gray);
            filter: var(--glow-gray);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title-detail::before {
            content: '>';
            color: var(--cathode-cyan);
            filter: var(--glow-cyan);
        }
        
        .project-description-full {
            color: var(--medium-gray-text);
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .highlights-list {
            list-style: none;
            padding: 0;
        }
        
        .highlights-list li {
            color: var(--medium-gray-text);
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .highlights-list li::before {
            content: '‚ñ∂';
            color: var(--terminal-green);
            filter: var(--glow-terminal);
            position: absolute;
            left: 0;
        }
        
        .project-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .project-image {
            background: var(--near-black);
            border: 1px solid var(--iron-gray);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--medium-gray-text);
            font-family: var(--font-mono);
        }
        
        .project-links-detail {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        
        .project-link-detail {
            background: var(--cathode-cyan);
            color: var(--pure-black);
            padding: 12px 24px;
            border-radius: 8px;
            font-family: var(--font-mono);
            font-weight: bold;
            text-decoration: none;
            filter: var(--glow-cyan);
            transition: all 0.3s ease;
        }
        
        .project-link-detail:hover {
            background: var(--cathode-cyan-deep);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .project-title-main {
                font-size: 2rem;
            }
            
            .project-detail-container {
                padding: 60px 15px 30px;
            }
            
            .project-hero {
                padding: 30px 20px;
            }
            
            .project-meta {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="portfolio-container">
        <!-- Circuit Board Background -->
        <svg class="circuit-bg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
            <defs>
                <pattern id="circuitPattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                    <!-- Circuit traces -->
                    <path d="M10,10 L90,10 L90,50 L50,50 L50,90" class="circuit-trace" fill="none" stroke-width="2"/>
                    <path d="M10,90 L30,90 L30,70 L70,70 L70,30 L90,30" class="circuit-trace" fill="none" stroke-width="1.5"/>
                    <!-- Circuit nodes -->
                    <circle cx="10" cy="10" r="3" class="circuit-node"/>
                    <circle cx="90" cy="50" r="2" class="circuit-node"/>
                    <circle cx="50" cy="90" r="2.5" class="circuit-node"/>
                </pattern>
                
                <!-- Glow filters -->
                <filter id="glow-amber">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge> 
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                
                <filter id="glow-cyan">
                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                    <feMerge> 
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>
            
            <rect width="100%" height="100%" fill="url(#circuitPattern)" opacity="0.1"/>
        </svg>

        <!-- Back Button -->
        <a href="index.html" class="back-button">
            <span>‚Üê</span>
            <span>BACK TO PORTFOLIO</span>
        </a>

        <!-- Project Detail Content -->
        <div class="project-detail-container">
            <!-- Project Hero Section -->
            <div class="project-hero">
                <h1 class="project-title-main" id="project-title">Loading Project...</h1>
                <p class="project-subtitle" id="project-subtitle">Initializing project data...</p>
                
                <div class="project-meta" id="project-meta">
                    <!-- Meta information will be loaded dynamically -->
                </div>
                
                <div class="project-links-detail" id="project-links">
                    <!-- Project links will be loaded dynamically -->
                </div>
            </div>

            <!-- Project Content -->
            <div class="project-content">
                <!-- Description Section -->
                <div class="content-section-detail">
                    <h2 class="section-title-detail">PROJECT OVERVIEW</h2>
                    <div class="project-description-full" id="project-description">
                        Loading project description...
                    </div>
                </div>

                <!-- Highlights Section -->
                <div class="content-section-detail">
                    <h2 class="section-title-detail">KEY HIGHLIGHTS</h2>
                    <ul class="highlights-list" id="project-highlights">
                        <!-- Highlights will be loaded dynamically -->
                    </ul>
                </div>

                <!-- Skills Section -->
                <div class="content-section-detail">
                    <h2 class="section-title-detail">TECHNOLOGIES USED</h2>
                    <div class="project-tech" id="project-skills">
                        <!-- Skills will be loaded dynamically -->
                    </div>
                </div>

                <!-- Images Section -->
                <div class="content-section-detail">
                    <h2 class="section-title-detail">PROJECT GALLERY</h2>
                    <div class="project-images" id="project-images">
                        <!-- Images will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ambient Effects -->
        <div class="ambient-effects">
            <div class="floating-particle" style="--delay: 0s; --duration: 8s;"></div>
            <div class="floating-particle" style="--delay: 2s; --duration: 12s;"></div>
            <div class="floating-particle" style="--delay: 4s; --duration: 10s;"></div>
        </div>
    </div>

    <script src="xml-parser.js"></script>
    <script>
        // Project Detail Page Controller
        class ProjectDetailController {
            constructor() {
                this.projectId = this.getProjectIdFromUrl();
                this.init();
            }
            
            getProjectIdFromUrl() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get('id');
            }
            
            init() {
                if (!this.projectId) {
                    this.showError('No project ID specified');
                    return;
                }
                
                this.loadProjectData();
                this.setupAmbientEffects();
            }
            
            async loadProjectData() {
                try {
                    // Load XML data
                    const response = await fetch('portfolio-template/portfolio-data.xml');
                    const xmlText = await response.text();
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
                    
                    // Check for XML parsing errors
                    const parseError = xmlDoc.querySelector('parsererror');
                    if (parseError) {
                        throw new Error('XML parsing failed: ' + parseError.textContent);
                    }
                    
                    // Find the specific project
                    const projectElement = xmlDoc.querySelector(`project[id="${this.projectId}"]`);
                    
                    if (!projectElement) {
                        this.showError('Project not found');
                        return;
                    }
                    
                    this.renderProject(projectElement);
                } catch (error) {
                    console.error('Error loading project data:', error);
                    this.showError('Failed to load project data');
                }
            }
            
            renderProject(projectElement) {
                // Extract project data
                const title = projectElement.querySelector('title')?.textContent || 'Untitled Project';
                const subtitle = projectElement.querySelector('subtitle')?.textContent || '';
                const timeframe = projectElement.querySelector('timeframe')?.textContent || '';
                const category = projectElement.querySelector('category')?.textContent || '';
                const description = projectElement.querySelector('description')?.textContent || '';
                const skills = projectElement.querySelector('skills')?.textContent || '';
                
                // Update page title
                document.title = `${title} - Portfolio`;
                
                // Render basic info
                document.getElementById('project-title').textContent = title;
                document.getElementById('project-subtitle').textContent = subtitle;
                document.getElementById('project-description').textContent = description;
                
                // Render meta information
                const metaContainer = document.getElementById('project-meta');
                metaContainer.innerHTML = `
                    <div class="meta-item">
                        <div class="meta-label">TIMEFRAME</div>
                        <div class="meta-value">${timeframe}</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">CATEGORY</div>
                        <div class="meta-value">${category.toUpperCase()}</div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">STATUS</div>
                        <div class="meta-value">${projectElement.getAttribute('featured') === 'true' ? 'FEATURED' : 'ACTIVE'}</div>
                    </div>
                `;
                
                // Render skills
                if (skills) {
                    const skillsContainer = document.getElementById('project-skills');
                    const skillsArray = skills.split(',').map(s => s.trim());
                    skillsContainer.innerHTML = skillsArray.map(skill => 
                        `<span class="tech-tag">${skill}</span>`
                    ).join('');
                }
                
                // Render highlights
                const highlightsContainer = document.getElementById('project-highlights');
                const highlights = projectElement.querySelectorAll('highlight');
                if (highlights.length > 0) {
                    highlightsContainer.innerHTML = Array.from(highlights).map(highlight => 
                        `<li>${highlight.textContent}</li>`
                    ).join('');
                } else {
                    highlightsContainer.innerHTML = '<li>No highlights available</li>';
                }
                
                // Render links
                const linksContainer = document.getElementById('project-links');
                const links = projectElement.querySelectorAll('link');
                if (links.length > 0) {
                    linksContainer.innerHTML = Array.from(links).map(link => 
                        `<a href="${link.textContent}" class="project-link-detail" target="_blank">${link.getAttribute('label') || 'View Project'}</a>`
                    ).join('');
                }
                
                // Render images
                const imagesContainer = document.getElementById('project-images');
                const images = projectElement.querySelectorAll('image');
                if (images.length > 0) {
                    imagesContainer.innerHTML = Array.from(images).map(image => 
                        `<div class="project-image">
                            <span>üì∑ ${image.textContent}</span>
                        </div>`
                    ).join('');
                } else {
                    imagesContainer.innerHTML = '<div class="project-image">No images available</div>';
                }
            }
            
            showError(message) {
                document.getElementById('project-title').textContent = 'ERROR';
                document.getElementById('project-subtitle').textContent = message;
                document.getElementById('project-description').textContent = 'Unable to load project details. Please return to the main portfolio.';
            }
            
            setupAmbientEffects() {
                // Create additional floating particles dynamically
                const ambientContainer = document.querySelector('.ambient-effects');
                
                const createParticle = () => {
                    const particle = document.createElement('div');
                    particle.className = 'floating-particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.setProperty('--delay', Math.random() * 5 + 's');
                    particle.style.setProperty('--duration', (8 + Math.random() * 8) + 's');
                    
                    // Random color variation
                    const colors = ['var(--cathode-cyan)', 'var(--amber-glow)', 'var(--phosphor-green)'];
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.background = randomColor;
                    
                    ambientContainer.appendChild(particle);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 16000);
                };
                
                // Create particles periodically
                setInterval(createParticle, 3000);
                
                // Initial particles
                for (let i = 0; i < 3; i++) {
                    setTimeout(createParticle, i * 1000);
                }
            }
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ProjectDetailController();
        });
    </script>
</body>
</html>