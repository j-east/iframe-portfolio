<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude API Proxy</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        .proxy-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 20px;
        }
        .proxy-title {
            text-align: center;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-transform: uppercase;
        }
        .instructions {
            background: rgba(0, 255, 0, 0.02);
            border: 1px solid rgba(0, 255, 0, 0.3);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff00;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin: 10px 0;
        }
        .warning {
            background: rgba(255, 255, 0, 0.1);
            border: 1px solid #ffff00;
            color: #ffff88;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="proxy-container">
        <h1 class="proxy-title">Claude API CORS Workaround</h1>
        
        <div class="warning">
            <strong>CORS Issue:</strong> Direct API calls to Claude from the browser are blocked by CORS policy.
        </div>

        <div class="instructions">
            <h3>Serverless Solutions:</h3>
            
            <h4>Option 1: Browser Extension Approach</h4>
            <p>Create a simple browser extension that can make the API calls without CORS restrictions:</p>
            <div class="code-block">
// manifest.json
{
  "manifest_version": 3,
  "name": "Portfolio Claude Proxy",
  "version": "1.0",
  "permissions": ["https://api.anthropic.com/*"],
  "content_scripts": [{
    "matches": ["file://*/*", "http://localhost:*", "https://localhost:*"],
    "js": ["content.js"]
  }]
}

// content.js
window.claudeProxy = async (apiKey, messages) => {
  const response = await fetch('https://api.anthropic.com/v1/messages', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'x-api-key': apiKey,
      'anthropic-version': '2023-06-01'
    },
    body: JSON.stringify({
      model: 'claude-3-sonnet-20240229',
      max_tokens: 1000,
      messages: messages
    })
  });
  return response.json();
};
            </div>

            <h4>Option 2: Local Server Approach</h4>
            <p>Run a simple local proxy server:</p>
            <div class="code-block">
# Install dependencies
npm install express cors

# Create server.js
const express = require('express');
const cors = require('cors');
const app = express();

app.use(cors());
app.use(express.json());

app.post('/claude-proxy', async (req, res) => {
  const { apiKey, messages } = req.body;
  
  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': apiKey,
        'anthropic-version': '2023-06-01'
      },
      body: JSON.stringify({
        model: 'claude-3-sonnet-20240229',
        max_tokens: 1000,
        messages: messages
      })
    });
    
    const data = await response.json();
    res.json(data);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

app.listen(3001, () => {
  console.log('Claude proxy running on http://localhost:3001');
});

# Run with: node server.js
            </div>

            <h4>Option 3: Manual Classification Workflow</h4>
            <p>For a truly serverless approach, we can provide a manual classification interface where users can:</p>
            <ul>
                <li>View images one by one</li>
                <li>Manually enter classification data</li>
                <li>Use suggested categories and tags</li>
                <li>Still get the XML generation benefits</li>
            </ul>
        </div>

        <div class="instructions">
            <h3>Recommended Approach:</h3>
            <p>I'll modify the workflow to include a <strong>manual classification mode</strong> as the primary option, with instructions for setting up the proxy server for automated classification.</p>
        </div>
    </div>
</body>
</html>